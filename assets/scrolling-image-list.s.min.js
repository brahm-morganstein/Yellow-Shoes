function throttle(t,e=300){let i=-1,n=!1;return()=>{clearTimeout(i),i=setTimeout(t,e),n||(t.call(),n=!0,setTimeout((()=>{n=!1}),e))}}if(!customElements.get("scrolling-image-list")){class t extends HTMLElement{constructor(){super(),window.initLazyScript(this,this.init.bind(this))}init(){if(this.images=this.querySelectorAll(".scrolling-image-list__image"),this.images.length>1){this.contentColumn=this.querySelector(".scrolling-image-list__content-column"),this.featureText=this.querySelector(".scrolling-image-list__content-column .feature-text-paired");const t=window.matchMedia("(min-width: 768px)");this.addListeners(t),t.addEventListener("change",(t=>{this.removeListeners(),this.addListeners(t)}))}this.setAttribute("loaded","")}addListeners(t){t.matches?(this.throttledHandleScroll=throttle(this.handleScroll.bind(this),100),window.addEventListener("scroll",this.throttledHandleScroll),this.boundUpdatePositioning=this.updatePositioning.bind(this),window.addEventListener("scroll",this.boundUpdatePositioning),window.addEventListener("resize",this.boundUpdatePositioning),this.throttledHandleScroll(),this.boundUpdatePositioning(),this.contentClickListeners=[],this.querySelectorAll(".scrolling-image-list__image").forEach((t=>{const e=()=>this.scrollToImage(t.dataset.index);this.contentClickListeners.push({el:t,oc:e}),t.addEventListener("click",e)})),this.delegatedKeydownHandler=theme.addDelegateEventListener(this,"keydown",".scrolling-image-list__image, .scrolling-image-list__content:not(.scrolling-image-list__content--mobile), .scrolling-image-list__content:not(.scrolling-image-list__content--mobile) a",this.handleKeydown.bind(this))):this.addEventListener("on:carousel-slider:select",this.handleSliderSelect.bind(this))}removeListeners(){if(window.removeEventListener("scroll",this.throttledHandleScroll),window.removeEventListener("scroll",this.boundUpdatePositioning),window.removeEventListener("resize",this.boundUpdatePositioning),this.contentClickListeners)for(let t=0;t<this.contentClickListeners.length;t+=1)this.contentClickListeners[t].el.removeEventListener("click",this.contentClickListeners[t].oc);this.removeEventListener("click",this.delegatedKeydownHandler)}handleScroll(){let e=1,i=Number.MAX_VALUE;this.images.forEach(((n,s)=>{const o=t.distanceFromViewportMiddle(n);o<i&&(e=s+1,i=o)})),this.dataset.currentIndex=e}handleKeydown(t,e){if("Tab"===t.code){if(e.classList.contains("scrolling-image-list__image"))return t.shiftKey?"1"!==e.dataset.index?(t.preventDefault(),void this.querySelector(`.scrolling-image-list__image[data-index="${parseInt(e.dataset.index,10)-1}"]`).focus()):void 0:(t.preventDefault(),void this.querySelector(`.scrolling-image-list__content:not(.scrolling-image-list__content--mobile)[data-index="${e.dataset.index}"]`).focus());if(e.classList.contains("scrolling-image-list__content"))return t.shiftKey?(t.preventDefault(),void this.querySelector(`.scrolling-image-list__image[data-index="${e.dataset.index}"]`).focus()):null!==e.nextElementSibling?(t.preventDefault(),void(e.querySelector("a")?e.querySelector("a").focus():this.querySelector(`.scrolling-image-list__image[data-index="${parseInt(e.dataset.index,10)+1}"]`).focus())):void 0;if("A"===e.tagName){const i=e.closest(".scrolling-image-list__content");if(null!==i.nextElementSibling){[...i.querySelectorAll("a")].pop()!==e||t.shiftKey||(t.preventDefault(),this.querySelector(`.scrolling-image-list__image[data-index="${parseInt(i.dataset.index,10)+1}"]`).focus())}}}}updatePositioning(){const t=this.contentColumn.getBoundingClientRect(),e=t.top+window.scrollY,i=this.featureText.getBoundingClientRect().height;let n=this.images[0].getBoundingClientRect();const s=n.top+window.scrollY+n.height/2;n=this.images[this.images.length-1].getBoundingClientRect();const o=n.top+window.scrollY+n.height/2,l=window.scrollY+window.innerHeight/2;l<s?(this.style.setProperty("--scrolling-image-list-content-offset-y",s-e-i/2+"px"),this.style.removeProperty("--scrolling-image-list-content-position"),this.style.removeProperty("--scrolling-image-list-content-offset-x"),this.style.removeProperty("--scrolling-image-list-content-width")):l>o?(this.style.setProperty("--scrolling-image-list-content-offset-y",o-e-i/2+"px"),this.style.removeProperty("--scrolling-image-list-content-position"),this.style.removeProperty("--scrolling-image-list-content-offset-x"),this.style.removeProperty("--scrolling-image-list-content-width")):(this.style.setProperty("--scrolling-image-list-content-position","fixed"),this.style.setProperty("--scrolling-image-list-content-offset-y",window.innerHeight/2-i/2+"px"),this.style.setProperty("--scrolling-image-list-content-offset-x",`${t.left}px`),this.style.setProperty("--scrolling-image-list-content-width",`${t.width}px`))}handleSliderSelect(t){this.dataset.currentIndex=t.detail.index+1}scrollToImage(t){const e=this.images[t-1];window.scrollTo({left:0,top:theme.getOffsetTopFromDoc(e)-(window.innerHeight-e.clientHeight)/2,behavior:"smooth"})}static distanceFromViewportMiddle(t){const e=window.scrollY+window.innerHeight/2,i=theme.getOffsetTopFromDoc(t)+t.clientHeight/2;return Math.abs(e-i)}}customElements.define("scrolling-image-list",t)}