$(document).ready((function(){let e=$("body");function t(){$(".opt-label--image").each((function(e,t){0==$(t).find("img").length&&$(t).hide()}))}setTimeout((function(){let t=e.find(".opt-btn.is-unavailable:checked+.opt-label"),a=e.find(".opt-btn:not(:checked)+.opt-label");t.length&&(a.length&&a[0].click(),setTimeout((function(){t[0].click()}),100))}),100),t(),document.addEventListener("on:variant:change",(t=>{let a=theme.locale,i=t.detail,n=i.form,o=$(n).find(".quantity-submit-row__submit").first(),l=i.variant,r=`\n    <button class="btn btn--large add-to-cart w-full" type="submit" name="add" data-add-to-cart-text="Add to cart">\n      ${"en"==a?"ADD TO CART":"AJOUTER AU PANIER"}\n    </button>\n  `,d=`\n   <div id="availability-btn" class="availability-btn btn btn--large w-full" data-options='{"touch" : false}' data-fancybox data-src="#availability-reminder-modal" >\n      ${"en"==a?"Notify me when available":"M'AVERTIR LORSQUE DISPONIBLE"}\n    </div>\n  `;l.inventory_quantity<1?$(o).html(d):$(o).html(r),e.on("click","#availability-reminder-submit-btn",(function(t){t.preventDefault(),console.log("here"),e.find(".availability-reminder-input").removeClass("border-danger"),e.find("#availability-reminder-error").attr("style","opacity:0;").text(""),e.find('[data-target="#agree-to-get-sms"]').removeClass("border-danger"),e.find('[data-target="#agree-to-get-sms"]').closest(".custom-checkbox-container").find(".custom-checkbox-label").removeClass("text-danger"),$.ajax({url:"https://app.yellowshoes.com/api/availability-reminders",method:"POST",data:{action:"record email",variant_id:l.id,email:e.find("#availability-reminder-email").val().trim(),phone:e.find("#availability-reminder-phone").val().trim(),postal_code:e.find("#availability-reminder-zip").val().trim(),signup_for_sms:e.find("#agree-to-get-sms")[0].checked?"1":"0",signup_for_email:e.find("#agree-to-get-email")[0].checked?"1":"0",language:theme.locale},dataType:"json",success:function(t){if(t.success)e.find(".fancybox-button").trigger("click"),e.find(".availability-reminder-input:not(#availability-reminder-variant-id)").val(""),setTimeout((function(){new Swal({title:"",text:"",icon:"success"})}),250);else if(void 0!==t.fields)for(let e of t.fields)$(e).addClass("border-danger"),$("#availability-reminder-error").html(t.message).attr("style","opacity:1;"),"#availability-reminder-phone-checkbox"==e&&($('[data-target="#agree-to-get-sms"]').addClass("border-danger"),$('[data-target="#agree-to-get-sms"]').closest(".custom-checkbox-container").find(".custom-checkbox-label").addClass("text-danger"))},error:function(e){}})}))})),document.addEventListener("on:quickbuy:after-open",(e=>{t(),function(e){let t=JSON.parse($(e.target).find("product-form").find('script[type="application/ld+json"]').html());console.log("DATA",t);let a=[];void 0!==t.offers&&t.offers&&(a=t.offers.map((function(e){return e.additionalProperty[0].value})));a=new Set(a),a.forEach((function(a){let i=0;t.offers.forEach((function(e){e.additionalProperty[0].value==a&&e.availability.includes("InStock")&&i++})),0==i&&$(e.target).find("product-form").find(".opt-label--image").each((function(e,t){$(t).html().includes(a)&&$(t).hide()}))}))}(e)}))}));